ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     1

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                             2 ***********************************************************************
                                                                             3 *
                                                                             4 *Testcase IEEE LOAD FP INTEGER
                                                                             5 *  Test case capability includes IEEE exceptions trappable and
                                                                             6 *  otherwise. Test results, FPCR flags, and any DXC are saved for all
                                                                             7 *  tests.  Load FP Integer does not set the condition code.
                                                                             8 *
                                                                             9 ***********************************************************************


                                                                            11 ***********************************************************************
                                                                            12 *
                                                                            13 * Tests the following three conversion instructions
                                                                            14 *   LOAD FP INTEGER (short BFP, RRE)
                                                                            15 *   LOAD FP INTEGER (long BFP, RRE)
                                                                            16 *   LOAD FP INTEGER (extended BFP, RRE)
                                                                            17 *   LOAD FP INTEGER (short BFP, RRF-e)
                                                                            18 *   LOAD FP INTEGER (long BFP, RRF-e)
                                                                            19 *   LOAD FP INTEGER (extended BFP, RRF-e)
                                                                            20 *
                                                                            21 * Test data is compiled into this program.  The test script that runs
                                                                            22 * this program can provide alternative test data through Hercules R
                                                                            23 * commands.
                                                                            24 *
                                                                            25 * Test Case Order
                                                                            26 * 1) Short BFP inexact masking/trapping & SNaN/QNaN tests
                                                                            27 * 2) Short BFP rounding mode tests
                                                                            28 * 3) Long BFP inexact masking/trapping & SNaN/QNaN tests
                                                                            29 * 4) Long BFP rounding mode tests
                                                                            30 * 5) Extended BFP inexact masking/trapping & SNaN/QNaN tests
                                                                            31 * 6) Extended BFP rounding mode tests
                                                                            32 *
                                                                            33 * Provided test data is 1, 1.5, SNaN, and QNaN.
                                                                            34 *   The second value will trigger an inexact exception when LOAD FP
                                                                            35 *   INTEGER is executed.  The final value will trigger an invalid
                                                                            36 *   exception.
                                                                            37 * Provided test data for rounding tests is
                                                                            38 *      -9.5, -5.5, -2.5, -1.5, -0.5, +0.5, +1.5, +2.5, +5.5, +9.5
                                                                            39 *   This data is taken from Table 9-11 on page 9-16 of SA22-7832-10.
                                                                            40 *
                                                                            41 * Three input test data sets are provided, one each for short, long,
                                                                            42 *   and extended precision BFP inputs.
                                                                            43 *
                                                                            44 * Also tests the following floating point support instructions
                                                                            45 *   LOAD  (Short)
                                                                            46 *   LOAD  (Long)
                                                                            47 *   LFPC  (Load Floating Point Control Register)
                                                                            48 *   SRNMB (Set BFP Rounding Mode 2-bit)
                                                                            49 *   SRNMB (Set BFP Rounding Mode 3-bit)
                                                                            50 *   STORE (Short)
                                                                            51 *   STORE (Long)
                                                                            52 *   STFPC (Store Floating Point Control Register)
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     2

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                            53 *
                                                                            54 ***********************************************************************


                                      0000000000000000  00000000000007E7    56 BFPLDFPI START 0
                                      0000000000000000  0000000000000001    57 R0       EQU   0
                                      0000000000000001  0000000000000001    58 R1       EQU   1
                                      0000000000000002  0000000000000001    59 R2       EQU   2
                                      0000000000000003  0000000000000001    60 R3       EQU   3
                                      0000000000000004  0000000000000001    61 R4       EQU   4
                                      0000000000000005  0000000000000001    62 R5       EQU   5
                                      0000000000000006  0000000000000001    63 R6       EQU   6
                                      0000000000000007  0000000000000001    64 R7       EQU   7
                                      0000000000000008  0000000000000001    65 R8       EQU   8
                                      0000000000000009  0000000000000001    66 R9       EQU   9
                                      000000000000000A  0000000000000001    67 R10      EQU   10
                                      000000000000000B  0000000000000001    68 R11      EQU   11
                                      000000000000000C  0000000000000001    69 R12      EQU   12
                                      000000000000000D  0000000000000001    70 R13      EQU   13
                                      000000000000000E  0000000000000001    71 R14      EQU   14
                                      000000000000000F  0000000000000001    72 R15      EQU   15
0000000000000000                      0000000000000000                      73          USING *,0
0000000000000000                      0000000000000000  000000000000008E    74          ORG   BFPLDFPI+X'8E'      Program check interrution code
000000000000008E  0000                                                      75 PCINTCD  DS    H
                                      0000000000000150  0000000000000000    76 PCOLDPSW EQU   BFPLDFPI+X'150'     Program check old PSW
0000000000000090                      0000000000000090  00000000000001A0    77          ORG   BFPLDFPI+X'1A0'
00000000000001A0  00000001 80000000                                         78          DC    X'0000000180000000',AD(START)       z/Arch restart PSW
00000000000001B0                      00000000000001B0  00000000000001D0    79          ORG   BFPLDFPI+X'1D0'
00000000000001D0  00000000 00000000                                         80          DC    X'0000000000000000',AD(PROGCHK)   z/Arch pgm chk
00000000000001E0                      00000000000001E0  0000000000000200    81          ORG   BFPLDFPI+X'200'
                                                                            82 *
                                                                            83 * Program check routine.  If Data Exception, continue execution at
                                                                            84 * the instruction following the program check.  Otherwise, hard wait.
                                                                            85 *
0000000000000200                                                            86 PROGCHK  DS    0H             Program check occured...
0000000000000200  9507 008F                             000000000000008F    87          CLI   PCINTCD+1,X'07'  Data Exception?
0000000000000204  4770 020C                             000000000000020C    88          BNE   PCNOTDTA       ..no, hardwait
0000000000000208  B2B2 0150                             0000000000000150    89          LPSWE PCOLDPSW       ..yes, resume program execution
000000000000020C  B2B2 0260                             0000000000000260    90 PCNOTDTA LPSWE HARDWAIT       Not data exception, enter disabled wait.
                                                                            91 *
                                                                            92 *  Main program.  Enable Advanced Floating Point, process test cases.
                                                                            93 *
0000000000000210  B600 0270                             0000000000000270    94 START    STCTL R0,R0,CTLR0    Store CR0 to enable AFP
0000000000000214  9604 0271                             0000000000000271    95          OI    CTLR0+1,X'04'  Turn on AFP bit
0000000000000218  B700 0270                             0000000000000270    96          LCTL  R0,R0,CTLR0    Reload updated CR0
                                                                            97 *
000000000000021C  41A0 0280                             0000000000000280    98          LA    R10,SHORTS     Point to short BFP test inputs
0000000000000220  4DD0 02E0                             00000000000002E0    99          BAS   R13,FIEBR      Convert short BFP to integer short BFP
0000000000000224  41A0 02B0                             00000000000002B0   100          LA    R10,RMSHORTS   Point to short BFP rounding test data
0000000000000228  4DD0 0326                             0000000000000326   101          BAS   R13,FIEBRA     Convert using all rounding mode options
                                                                           102 *
000000000000022C  41A0 0290                             0000000000000290   103          LA    R10,LONGS      Point to long BFP test inputs
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     3

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

0000000000000230  4DD0 03F8                             00000000000003F8   104          BAS   R13,FIDBR      Convert long BFP to integer long BFP
0000000000000234  41A0 02C0                             00000000000002C0   105          LA    R10,RMLONGS    Point to long BFP rounding test data
0000000000000238  4DD0 043E                             000000000000043E   106          BAS   R13,FIDBRA     Convert using all rounding mode options
                                                                           107 *
000000000000023C  41A0 02A0                             00000000000002A0   108          LA    R10,EXTDS      Point to extended BFP test inputs
0000000000000240  4DD0 0510                             0000000000000510   109          BAS   R13,FIXBR      Convert extd BFP to integer extd BFP
0000000000000244  41A0 02D0                             00000000000002D0   110          LA    R10,RMEXTDS    Point to extended BFP rounding test data
0000000000000248  4DD0 0562                             0000000000000562   111          BAS   R13,FIXBRA     Convert using all rounding mode options
                                                                           112 *
000000000000024C  B2B2 0250                             0000000000000250   113          LPSWE WAITPSW        All done
                                                                           114 *
0000000000000250                                                           115          DS    0D             Ensure correct alignment for psw
0000000000000250  00020000 00000000                                        116 WAITPSW  DC    X'0002000000000000',AD(0)  Normal end - disabled wait
0000000000000260  00020000 00000000                                        117 HARDWAIT DC    X'0002000000000000',XL6'00',X'DEAD' Abnormal end
                                                                           118 *
0000000000000270  00000000                                                 119 CTLR0    DS    F
0000000000000274  00000000                                                 120 FPCREGNT DC    X'00000000'  FPCR, trap all IEEE exceptions, zero flags
0000000000000278  F8000000                                                 121 FPCREGTR DC    X'F8000000'  FPCR, trap no IEEE exceptions, zero flags
                                                                           122 *
                                                                           123 * Input values parameter list, four fullwords:
                                                                           124 *      1) Count,
                                                                           125 *      2) Address of inputs,
                                                                           126 *      3) Address to place results, and
                                                                           127 *      4) Address to place DXC/Flags/cc values.
                                                                           128 *
000000000000027C                      000000000000027C  0000000000000280   129          ORG   BFPLDFPI+X'280'
0000000000000280                                                           130 SHORTS   DS    0F           Inputs for short BFP testing
0000000000000280  00000004                                                 131          DC    A(SBFPCT/4)
0000000000000284  00000660                                                 132          DC    A(SBFPIN)
0000000000000288  00001000                                                 133          DC    A(SBFPOUT)
000000000000028C  00001080                                                 134          DC    A(SBFPFLGS)
                                                                           135 *
0000000000000290                                                           136 LONGS    DS    0F           Inputs for long BFP testing
0000000000000290  00000004                                                 137          DC    A(LBFPCT/8)
0000000000000294  00000698                                                 138          DC    A(LBFPIN)
0000000000000298  00001500                                                 139          DC    A(LBFPOUT)
000000000000029C  00001580                                                 140          DC    A(LBFPFLGS)
                                                                           141 *
00000000000002A0                                                           142 EXTDS    DS    0F           Inputs for Extended BFP testing
00000000000002A0  00000004                                                 143          DC    A(XBFPCT/16)
00000000000002A4  00000708                                                 144          DC    A(XBFPIN)
00000000000002A8  00001C00                                                 145          DC    A(XBFPOUT)
00000000000002AC  00001C80                                                 146          DC    A(XBFPFLGS)
                                                                           147 *
00000000000002B0                                                           148 RMSHORTS DS    0F           Inputs for short BFP rounding testing
00000000000002B0  0000000A                                                 149          DC    A(SBFPRMCT/4)
00000000000002B4  00000670                                                 150          DC    A(SBFPINRM)
00000000000002B8  00001100                                                 151          DC    A(SBFPRMO)
00000000000002BC  00001300                                                 152          DC    A(SBFPRMOF)
                                                                           153 *
00000000000002C0                                                           154 RMLONGS  DS    0F           Inputs for long  BFP rounding testing
00000000000002C0  0000000A                                                 155          DC    A(LBFPRMCT/8)
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     4

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

00000000000002C4  000006B8                                                 156          DC    A(LBFPINRM)
00000000000002C8  00001600                                                 157          DC    A(LBFPRMO)
00000000000002CC  00001A00                                                 158          DC    A(LBFPRMOF)
                                                                           159 *
00000000000002D0                                                           160 RMEXTDS  DS    0F           Inputs for extd BFP rounding testing
00000000000002D0  0000000A                                                 161          DC    A(XBFPRMCT/16)
00000000000002D4  00000748                                                 162          DC    A(XBFPINRM)
00000000000002D8  00001D00                                                 163          DC    A(XBFPRMO)
00000000000002DC  00002400                                                 164          DC    A(XBFPRMOF)
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     5

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           166 ***********************************************************************
                                                                           167 *
                                                                           168 * Round short BFP intputs to integer short BFP.  A pair of results is
                                                                           169 * generated for each input: one with all exceptions non-trappable, and
                                                                           170 * the second with all exceptions trappable.   The FPCR is stored for
                                                                           171 * each result.
                                                                           172 *
                                                                           173 ***********************************************************************


00000000000002E0  9823 A000                             0000000000000000   175 FIEBR    LM    R2,R3,0(R10)  Get count and address of test input values
00000000000002E4  9878 A008                             0000000000000008   176          LM    R7,R8,8(R10)  Get address of result area and flag area.
00000000000002E8  1222                                                     177          LTR   R2,R2         Any test cases?
00000000000002EA  078D                                                     178          BZR   R13           ..No, return to caller
00000000000002EC  0DC0                                                     179          BASR  R12,0         Set top of loop
                                                                           180 *
00000000000002EE  7800 3000                             0000000000000000   181          LE    R0,0(0,R3)    Get short BFP test value
00000000000002F2  B29D 0274                             0000000000000274   182          LFPC  FPCREGNT      Set exceptions non-trappable
00000000000002F6  B357 0010                                                183          FIEBR R1,R0         Cvt float in FPR0 to int float in FPR1
00000000000002FA  7010 7000                             0000000000000000   184          STE   R1,0(0,R7)    Store short BFP result
00000000000002FE  B29C 8000                             0000000000000000   185          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           186 *
0000000000000302  B29D 0278                             0000000000000278   187          LFPC  FPCREGTR      Set exceptions trappable
0000000000000306  B374 0010                                                188          LZER  R1            Eliminate any residual results
000000000000030A  B357 0010                                                189          FIEBR R1,R0         Cvt float in FPR0 to int float in FPR1
000000000000030E  7010 7004                             0000000000000004   190          STE   R1,4(0,R7)    Store short BFP result
0000000000000312  B29C 8004                             0000000000000004   191          STFPC 4(R8)         Store resulting FPCR flags and DXC
                                                                           192 *
0000000000000316  4130 3004                             0000000000000004   193          LA    R3,4(0,R3)    point to next input value
000000000000031A  4170 7008                             0000000000000008   194          LA    R7,8(0,R7)    Point to next rounded rusult value pair
000000000000031E  4180 8008                             0000000000000008   195          LA    R8,8(0,R8)    Point to next FPCR result area
0000000000000322  062C                                                     196          BCTR  R2,R12        Convert next input value.
0000000000000324  07FD                                                     197          BR    R13           All converted; return.
                                                                           198 *
                                                                           199 * Convert short BFP to integer BFP using each possible rounding mode.
                                                                           200 * Ten test results are generated for each input.  A 48-byte test result
                                                                           201 * section is used to keep results sets aligned on a quad-double word.
                                                                           202 *
                                                                           203 * The first four tests use rounding modes specified in the FPCR with
                                                                           204 * the IEEE Inexact exception supressed.  SRNM (2-bit) is used  for
                                                                           205 * the first two FPCR-controlled tests and SRNMB (3-bit) is used for
                                                                           206 * the last two To get full coverage of that instruction pair.
                                                                           207 *
                                                                           208 * The next six results use instruction-specified rounding modes.
                                                                           209 *
                                                                           210 * The default rounding mode (0 for RNTE) is not tested in this section;
                                                                           211 * prior tests used the default rounding mode.  RNTE is tested
                                                                           212 * explicitly as a rounding mode in this section.
                                                                           213 *
0000000000000326  9823 A000                             0000000000000000   214 FIEBRA   LM    R2,R3,0(R10)  Get count and address of test input values
000000000000032A  9878 A008                             0000000000000008   215          LM    R7,R8,8(R10)  Get address of result area and flag area.
000000000000032E  1222                                                     216          LTR   R2,R2         Any test cases?
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     6

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

0000000000000330  078D                                                     217          BZR   R13           ..No, return to caller
0000000000000332  0DC0                                                     218          BASR  R12,0         Set top of loop
                                                                           219 *
0000000000000334  7800 3000                             0000000000000000   220          LE    R0,0(0,R3)    Get short BFP test value
                                                                           221 *
                                                                           222 * Test cases using rounding mode specified in the FPCR
                                                                           223 *
0000000000000338  B29D 0274                             0000000000000274   224          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000033C  B299 0001                             0000000000000001   225          SRNM  1             SET FPCR to RZ, towards zero.
0000000000000340  B357 0410                                                226          FIEBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000344  7010 7000                             0000000000000000   227          STE   R1,0*4(0,R7)  Store integer BFP result
0000000000000348  B29C 8000                             0000000000000000   228          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           229 *
000000000000034C  B29D 0274                             0000000000000274   230          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000350  B299 0002                             0000000000000002   231          SRNM  2             SET FPCR to RP, to +infinity
0000000000000354  B357 0410                                                232          FIEBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000358  7010 7004                             0000000000000004   233          STE   R1,1*4(0,R7)  Store integer BFP result
000000000000035C  B29C 8004                             0000000000000004   234          STFPC 1*4(R8)       Store resulting FPCR flags and DXC
                                                                           235 *
0000000000000360  B29D 0274                             0000000000000274   236          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000364  B2B8 0003                             0000000000000003   237          SRNMB 3             SET FPCR to RM, to -infinity
0000000000000368  B357 0410                                                238          FIEBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
000000000000036C  7010 7008                             0000000000000008   239          STE   R1,2*4(0,R7)  Store integer BFP result
0000000000000370  B29C 8008                             0000000000000008   240          STFPC 2*4(R8)       Store resulting FPCR flags and DXC
                                                                           241 *
0000000000000374  B29D 0274                             0000000000000274   242          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000378  B2B8 0007                             0000000000000007   243          SRNMB 7             RPS, Prepare for Shorter Precision
000000000000037C  B357 0410                                                244          FIEBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000380  7010 700C                             000000000000000C   245          STE   R1,3*4(0,R7)  Store integer BFP result
0000000000000384  B29C 800C                             000000000000000C   246          STFPC 3*4(R8)       Store resulting FPCR flags and DXC
                                                                           247 *
                                                                           248 * Test cases using rounding mode specified in the instruction M3 field
                                                                           249 *
0000000000000388  B29D 0274                             0000000000000274   250          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000038C  B357 1010                                                251          FIEBRA R1,1,R0,B'0000'  RNTA, to nearest, ties away from zero
0000000000000390  7010 7010                             0000000000000010   252          STE   R1,4*4(0,R7)  Store integer BFP result
0000000000000394  B29C 8010                             0000000000000010   253          STFPC 4*4(R8)       Store resulting FPCR flags and DXC
                                                                           254 *
0000000000000398  B29D 0274                             0000000000000274   255          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000039C  B357 3010                                                256          FIEBRA R1,3,R0,B'0000'  RFS, to prepare for shorter precision
00000000000003A0  7010 7014                             0000000000000014   257          STE   R1,5*4(0,R7)  Store integer BFP result
00000000000003A4  B29C 8014                             0000000000000014   258          STFPC 5*4(R8)       Store resulting FPCR flags and DXC
                                                                           259 *
00000000000003A8  B29D 0274                             0000000000000274   260          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000003AC  B357 4010                                                261          FIEBRA R1,4,R0,B'0000'  RNTE, to nearest, ties to even
00000000000003B0  7010 7018                             0000000000000018   262          STE   R1,6*4(0,R7)  Store integer BFP result
00000000000003B4  B29C 8018                             0000000000000018   263          STFPC 6*4(R8)       Store resulting FPCR flags and DXC
                                                                           264 *
00000000000003B8  B29D 0274                             0000000000000274   265          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000003BC  B357 5010                                                266          FIEBRA R1,5,R0,B'0000'  RZ, toward zero
00000000000003C0  7010 701C                             000000000000001C   267          STE   R1,7*4(0,R7)  Store integer BFP result
00000000000003C4  B29C 801C                             000000000000001C   268          STFPC 7*4(R8)       Store resulting FPCR flags and DXC
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     7

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           269 *
00000000000003C8  B29D 0274                             0000000000000274   270          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000003CC  B357 6010                                                271          FIEBRA R1,6,R0,B'0000'  RP, to +inf
00000000000003D0  7010 7020                             0000000000000020   272          STE   R1,8*4(0,R7)  Store integer BFP result
00000000000003D4  B29C 8020                             0000000000000020   273          STFPC 8*4(R8)       Store resulting FPCR flags and DXC
                                                                           274 *
00000000000003D8  B29D 0274                             0000000000000274   275          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000003DC  B357 7010                                                276          FIEBRA R1,7,R0,B'0000'  RM, to -inf
00000000000003E0  7010 7024                             0000000000000024   277          STE   R1,9*4(0,R7)  Store integer BFP result
00000000000003E4  B29C 8024                             0000000000000024   278          STFPC 9*4(R8)       Store resulting FPCR flags and DXC
                                                                           279 *
00000000000003E8  4130 3004                             0000000000000004   280          LA    R3,4(0,R3)    point to next input values
00000000000003EC  4170 7030                             0000000000000030   281          LA    R7,12*4(0,R7)  Point to next short BFP converted values
00000000000003F0  4180 8030                             0000000000000030   282          LA    R8,12*4(0,R8)  Point to next FPCR/CC result area
00000000000003F4  062C                                                     283          BCTR  R2,R12        Convert next input value.
00000000000003F6  07FD                                                     284          BR    R13           All converted; return.
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     8

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           286 ***********************************************************************
                                                                           287 *
                                                                           288 * Round long BFP inputs to integer long BFP.  A pair of results is
                                                                           289 * generated for each input: one with all exceptions non-trappable, and
                                                                           290 * the second with all exceptions trappable.   The FPCR is stored for
                                                                           291 * each result.
                                                                           292 *
                                                                           293 ***********************************************************************


00000000000003F8  9823 A000                             0000000000000000   295 FIDBR    LM    R2,R3,0(R10)  Get count and address of test input values
00000000000003FC  9878 A008                             0000000000000008   296          LM    R7,R8,8(R10)  Get address of result area and flag area.
0000000000000400  1222                                                     297          LTR   R2,R2         Any test cases?
0000000000000402  078D                                                     298          BZR   R13           ..No, return to caller
0000000000000404  0DC0                                                     299          BASR  R12,0         Set top of loop
                                                                           300 *
0000000000000406  6800 3000                             0000000000000000   301          LD    R0,0(0,R3)    Get long BFP test value
000000000000040A  B29D 0274                             0000000000000274   302          LFPC  FPCREGNT      Set exceptions non-trappable
000000000000040E  B35F 0010                                                303          FIDBR R1,R0         Cvt float in FPR0 to Int in GPR1
0000000000000412  6010 7000                             0000000000000000   304          STD   R1,0(0,R7)    Store long BFP result
0000000000000416  B29C 8000                             0000000000000000   305          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           306 *
000000000000041A  B29D 0278                             0000000000000278   307          LFPC  FPCREGTR      Set exceptions trappable
000000000000041E  B375 0010                                                308          LZDR  R1            Eliminate any residual results
0000000000000422  B35F 0010                                                309          FIDBR R1,R0         Cvt float in FPR0 to Int in GPR1
0000000000000426  6010 7008                             0000000000000008   310          STD   R1,8(0,R7)    Store int-32 result
000000000000042A  B29C 8004                             0000000000000004   311          STFPC 4(R8)         Store resulting FPCR flags and DXC
                                                                           312 *
000000000000042E  4130 3008                             0000000000000008   313          LA    R3,8(0,R3)    point to next input value
0000000000000432  4170 7010                             0000000000000010   314          LA    R7,16(0,R7)   Point to next rounded long BFP result pair
0000000000000436  4180 8008                             0000000000000008   315          LA    R8,8(0,R8)    Point to next FPCR result area
000000000000043A  062C                                                     316          BCTR  R2,R12        Convert next input value.
000000000000043C  07FD                                                     317          BR    R13           All converted; return.
                                                                           318 *
                                                                           319 * Convert long BFP to integers using each possible rounding mode.
                                                                           320 * Ten test results are generated for each input.  A 48-byte test result
                                                                           321 * section is used to keep results sets aligned on a quad-double word.
                                                                           322 *
                                                                           323 * The first four tests use rounding modes specified in the FPCR with
                                                                           324 * the IEEE Inexact exception supressed.  SRNM (2-bit) is used  for
                                                                           325 * the first two FPCR-controlled tests and SRNMB (3-bit) is used for
                                                                           326 * the last two To get full coverage of that instruction pair.
                                                                           327 *
                                                                           328 * The next six results use instruction-specified rounding modes.
                                                                           329 *
                                                                           330 * The default rounding mode (0 for RNTE) is not tested in this section;
                                                                           331 * prior tests used the default rounding mode.  RNTE is tested
                                                                           332 * explicitly as a rounding mode in this section.
                                                                           333 *
000000000000043E  9823 A000                             0000000000000000   334 FIDBRA   LM    R2,R3,0(R10)  Get count and address of test input values
0000000000000442  9878 A008                             0000000000000008   335          LM    R7,R8,8(R10)  Get address of result area and flag area.
0000000000000446  1222                                                     336          LTR   R2,R2         Any test cases?
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page     9

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

0000000000000448  078D                                                     337          BZR   R13           ..No, return to caller
000000000000044A  0DC0                                                     338          BASR  R12,0         Set top of loop
                                                                           339 *
000000000000044C  6800 3000                             0000000000000000   340          LD    R0,0(0,R3)    Get long BFP test value
                                                                           341 *
                                                                           342 * Test cases using rounding mode specified in the FPCR
                                                                           343 *
0000000000000450  B29D 0274                             0000000000000274   344          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000454  B299 0001                             0000000000000001   345          SRNM  1             SET FPCR to RZ, towards zero.
0000000000000458  B35F 0410                                                346          FIDBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
000000000000045C  6010 7000                             0000000000000000   347          STD   R1,0*8(0,R7)  Store integer BFP result
0000000000000460  B29C 8000                             0000000000000000   348          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           349 *
0000000000000464  B29D 0274                             0000000000000274   350          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000468  B299 0002                             0000000000000002   351          SRNM  2             SET FPCR to RP, to +infinity
000000000000046C  B35F 0410                                                352          FIDBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000470  6010 7008                             0000000000000008   353          STD   R1,1*8(0,R7)  Store integer BFP result
0000000000000474  B29C 8004                             0000000000000004   354          STFPC 1*4(R8)       Store resulting FPCR flags and DXC
                                                                           355 *
0000000000000478  B29D 0274                             0000000000000274   356          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000047C  B2B8 0003                             0000000000000003   357          SRNMB 3             SET FPCR to RM, to -infinity
0000000000000480  B35F 0410                                                358          FIDBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000484  6010 7010                             0000000000000010   359          STD   R1,2*8(0,R7)  Store integer BFP result
0000000000000488  B29C 8008                             0000000000000008   360          STFPC 2*4(R8)       Store resulting FPCR flags and DXC
                                                                           361 *
000000000000048C  B29D 0274                             0000000000000274   362          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000490  B2B8 0007                             0000000000000007   363          SRNMB 7             RPS, Prepare for Shorter Precision
0000000000000494  B35F 0410                                                364          FIDBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000498  6010 7018                             0000000000000018   365          STD   R1,3*8(0,R7)  Store integer BFP result
000000000000049C  B29C 800C                             000000000000000C   366          STFPC 3*4(R8)       Store resulting FPCR flags and DXC
                                                                           367 *
                                                                           368 * Test cases using rounding mode specified in the instruction M3 field
                                                                           369 *
00000000000004A0  B29D 0274                             0000000000000274   370          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004A4  B35F 1010                                                371          FIDBRA R1,1,R0,B'0000'  RNTA, to nearest, ties away from zero
00000000000004A8  6010 7020                             0000000000000020   372          STD   R1,4*8(0,R7)  Store integer BFP result
00000000000004AC  B29C 8010                             0000000000000010   373          STFPC 4*4(R8)       Store resulting FPCR flags and DXC
                                                                           374 *
00000000000004B0  B29D 0274                             0000000000000274   375          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004B4  B35F 3010                                                376          FIDBRA R1,3,R0,B'0000'  RFS, to prepare for shorter precision
00000000000004B8  6010 7028                             0000000000000028   377          STD   R1,5*8(0,R7)  Store integer BFP result
00000000000004BC  B29C 8014                             0000000000000014   378          STFPC 5*4(R8)       Store resulting FPCR flags and DXC
                                                                           379 *
00000000000004C0  B29D 0274                             0000000000000274   380          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004C4  B35F 4010                                                381          FIDBRA R1,4,R0,B'0000'  RNTE, to nearest, ties to even
00000000000004C8  6010 7030                             0000000000000030   382          STD   R1,6*8(0,R7)  Store integer BFP result
00000000000004CC  B29C 8018                             0000000000000018   383          STFPC 6*4(R8)       Store resulting FPCR flags and DXC
                                                                           384 *
00000000000004D0  B29D 0274                             0000000000000274   385          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004D4  B35F 5010                                                386          FIDBRA R1,5,R0,B'0000'  RZ, toward zero
00000000000004D8  6010 7038                             0000000000000038   387          STD   R1,7*8(0,R7)  Store integer BFP result
00000000000004DC  B29C 801C                             000000000000001C   388          STFPC 7*4(R8)       Store resulting FPCR flags and DXC
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    10

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           389 *
00000000000004E0  B29D 0274                             0000000000000274   390          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004E4  B35F 6010                                                391          FIDBRA R1,6,R0,B'0000'  RP, to +inf
00000000000004E8  6010 7040                             0000000000000040   392          STD   R1,8*8(0,R7)  Store integer BFP result
00000000000004EC  B29C 8020                             0000000000000020   393          STFPC 8*4(R8)       Store resulting FPCR flags and DXC
                                                                           394 *
00000000000004F0  B29D 0274                             0000000000000274   395          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000004F4  B35F 7010                                                396          FIDBRA R1,7,R0,B'0000'  RM, to -inf
00000000000004F8  6010 7048                             0000000000000048   397          STD   R1,9*8(0,R7)  Store integer BFP result
00000000000004FC  B29C 8024                             0000000000000024   398          STFPC 9*4(R8)       Store resulting FPCR flags and DXC
                                                                           399 *
0000000000000500  4130 3008                             0000000000000008   400          LA    R3,8(0,R3)    point to next input values
0000000000000504  4170 7050                             0000000000000050   401          LA    R7,10*8(0,R7)  Point to next long BFP converted values
0000000000000508  4180 8030                             0000000000000030   402          LA    R8,12*4(0,R8)  Point to next FPCR/CC result area
000000000000050C  062C                                                     403          BCTR  R2,R12        Convert next input value.
000000000000050E  07FD                                                     404          BR    R13           All converted; return.
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    11

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           406 ***********************************************************************
                                                                           407 *
                                                                           408 * Round extended BFP to integer extended BFP.  A pair of results is
                                                                           409 * generated for each input: one with all exceptions non-trappable, and
                                                                           410 * the second with all exceptions trappable.   The FPCR is stored for
                                                                           411 * each result.
                                                                           412 *
                                                                           413 ***********************************************************************


0000000000000510  9823 A000                             0000000000000000   415 FIXBR    LM    R2,R3,0(R10)  Get count and address of test input values
0000000000000514  9878 A008                             0000000000000008   416          LM    R7,R8,8(R10)  Get address of result area and flag area.
0000000000000518  1222                                                     417          LTR   R2,R2         Any test cases?
000000000000051A  078D                                                     418          BZR   R13           ..No, return to caller
000000000000051C  0DC0                                                     419          BASR  R12,0         Set top of loop
                                                                           420 *
000000000000051E  6800 3000                             0000000000000000   421          LD    R0,0(0,R3)    Get extended BFP test value part 1
0000000000000522  6820 3008                             0000000000000008   422          LD    R2,8(0,R3)    Get extended BFP test value part 2
0000000000000526  B29D 0274                             0000000000000274   423          LFPC  FPCREGNT      Set exceptions non-trappable
000000000000052A  B347 0010                                                424          FIXBR R1,R0         Cvt FPR0-FPR2 to int float in FPR1-FPR3
000000000000052E  6010 7000                             0000000000000000   425          STD   R1,0(0,R7)    Store integer BFP result part 1
0000000000000532  6030 7008                             0000000000000008   426          STD   R3,8(0,R7)    Store integer BFP result part 2
0000000000000536  B29C 8000                             0000000000000000   427          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           428 *
000000000000053A  B29D 0278                             0000000000000278   429          LFPC  FPCREGTR      Set exceptions trappable
000000000000053E  B376 0010                                                430          LZXR  R1            Eliminate any residual results
0000000000000542  B347 0010                                                431          FIXBR R1,R0         Cvt FPR0-FPR2 to int float in FPR1-FPR3
0000000000000546  6010 7010                             0000000000000010   432          STD   R1,16(0,R7)   Store integer BFP result part 1
000000000000054A  6030 7018                             0000000000000018   433          STD   R3,24(0,R7)   Store integer BFP result part 2
000000000000054E  B29C 8004                             0000000000000004   434          STFPC 4(R8)         Store resulting FPCR flags and DXC
                                                                           435 *
0000000000000552  4130 3010                             0000000000000010   436          LA    R3,16(0,R3)   Point to next extended BFP input value
0000000000000556  4170 7020                             0000000000000020   437          LA    R7,32(0,R7)   Point to next extd BFP rounded result pair
000000000000055A  4180 8008                             0000000000000008   438          LA    R8,8(0,R8)    Point to next FPCR/CC result area
000000000000055E  062C                                                     439          BCTR  R2,R12        Convert next input value.
0000000000000560  07FD                                                     440          BR    R13           All converted; return.
                                                                           441 *
                                                                           442 * Convert extended BFP to integers using each possible rounding mode.
                                                                           443 * Ten test results are generated for each input.  A 48-byte test result
                                                                           444 * section is used to keep results sets aligned on a quad-double word.
                                                                           445 *
                                                                           446 * The first four tests use rounding modes specified in the FPCR with
                                                                           447 * the IEEE Inexact exception supressed.  SRNM (2-bit) is used  for
                                                                           448 * the first two FPCR-controlled tests and SRNMB (3-bit) is used for
                                                                           449 * the last two To get full coverage of that instruction pair.
                                                                           450 *
                                                                           451 * The next six results use instruction-specified rounding modes.
                                                                           452 *
                                                                           453 * The default rounding mode (0 for RNTE) is not tested in this section;
                                                                           454 * prior tests used the default rounding mode.  RNTE is tested
                                                                           455 * explicitly as a rounding mode in this section.
                                                                           456 *
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    12

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

0000000000000562  9823 A000                             0000000000000000   457 FIXBRA   LM    R2,R3,0(R10)  Get count and address of test input values
0000000000000566  9878 A008                             0000000000000008   458          LM    R7,R8,8(R10)  Get address of result area and flag area.
000000000000056A  1222                                                     459          LTR   R2,R2         Any test cases?
000000000000056C  078D                                                     460          BZR   R13           ..No, return to caller
000000000000056E  0DC0                                                     461          BASR  R12,0         Set top of loop
                                                                           462 *
0000000000000570  6800 3000                             0000000000000000   463          LD    R0,0(0,R3)    Get extended BFP test value part 1
0000000000000574  6820 3008                             0000000000000008   464          LD    R2,8(0,R3)    Get extended BFP test value part 2
                                                                           465 *
                                                                           466 * Test cases using rounding mode specified in the FPCR
                                                                           467 *
0000000000000578  B29D 0274                             0000000000000274   468          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000057C  B299 0001                             0000000000000001   469          SRNM  1             SET FPCR to RZ, towards zero.
0000000000000580  B347 0410                                                470          FIXBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
0000000000000584  6010 7000                             0000000000000000   471          STD   R1,0*16(0,R7)     Store integer BFP result part 1
0000000000000588  6030 7008                             0000000000000008   472          STD   R3,(0*16)+8(0,R7) Store integer BFP result part 2
000000000000058C  B29C 8000                             0000000000000000   473          STFPC 0(R8)         Store resulting FPCR flags and DXC
                                                                           474 *
0000000000000590  B29D 0274                             0000000000000274   475          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000594  B299 0002                             0000000000000002   476          SRNM  2             SET FPCR to RP, to +infinity
0000000000000598  B347 0410                                                477          FIXBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
000000000000059C  6010 7010                             0000000000000010   478          STD   R1,1*16(0,R7)     Store integer BFP result part 1
00000000000005A0  6030 7018                             0000000000000018   479          STD   R3,(1*16)+8(0,R7) Store integer BFP result part 2
00000000000005A4  B29C 8004                             0000000000000004   480          STFPC 1*4(R8)       Store resulting FPCR flags and DXC
                                                                           481 *
00000000000005A8  B29D 0274                             0000000000000274   482          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000005AC  B2B8 0003                             0000000000000003   483          SRNMB 3             SET FPCR to RM, to -infinity
00000000000005B0  B347 0410                                                484          FIXBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
00000000000005B4  6010 7020                             0000000000000020   485          STD   R1,2*16(0,R7)     Store integer BFP result part 1
00000000000005B8  6030 7028                             0000000000000028   486          STD   R3,(2*16)+8(0,R7) Store integer BFP result part 2
00000000000005BC  B29C 8008                             0000000000000008   487          STFPC 2*4(R8)       Store resulting FPCR flags and DXC
                                                                           488 *
00000000000005C0  B29D 0274                             0000000000000274   489          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000005C4  B2B8 0007                             0000000000000007   490          SRNMB 7             RFS, Prepare for Shorter Precision
00000000000005C8  B347 0410                                                491          FIXBRA R1,0,R0,B'0100'  FPCR ctl'd rounding, inexact masked
00000000000005CC  6010 7030                             0000000000000030   492          STD   R1,3*16(0,R7)     Store integer BFP result part 1
00000000000005D0  6030 7038                             0000000000000038   493          STD   R3,(3*16)+8(0,R7) Store integer BFP result part 2
00000000000005D4  B29C 800C                             000000000000000C   494          STFPC 3*4(R8)       Store resulting FPCR flags and DXC
                                                                           495 *
                                                                           496 * Test cases using rounding mode specified in the instruction M3 field
                                                                           497 *
00000000000005D8  B29D 0274                             0000000000000274   498          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000005DC  B347 1010                                                499          FIXBRA R1,1,R0,B'0000'  RNTA, to nearest, ties away from zero
00000000000005E0  6010 7040                             0000000000000040   500          STD   R1,4*16(0,R7)     Store integer BFP result part 1
00000000000005E4  6030 7048                             0000000000000048   501          STD   R3,(4*16)+8(0,R7) Store integer BFP result part 2
00000000000005E8  B29C 8010                             0000000000000010   502          STFPC 4*4(R8)       Store resulting FPCR flags and DXC
                                                                           503 *
00000000000005EC  B29D 0274                             0000000000000274   504          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
00000000000005F0  B347 3010                                                505          FIXBRA R1,3,R0,B'0000'  RFS, to prepare for shorter precision
00000000000005F4  6010 7050                             0000000000000050   506          STD   R1,5*16(0,R7)     Store integer BFP result part 1
00000000000005F8  6030 7058                             0000000000000058   507          STD   R3,(5*16)+8(0,R7) Store integer BFP result part 2
00000000000005FC  B29C 8014                             0000000000000014   508          STFPC 5*4(R8)       Store resulting FPCR flags and DXC
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    13

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           509 *
0000000000000600  B29D 0274                             0000000000000274   510          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000604  B347 4010                                                511          FIXBRA R1,4,R0,B'0000'  RNTE, to nearest, ties to even
0000000000000608  6010 7060                             0000000000000060   512          STD   R1,6*16(0,R7)     Store integer BFP result part 1
000000000000060C  6030 7068                             0000000000000068   513          STD   R3,(6*16)+8(0,R7) Store integer BFP result part 2
0000000000000610  B29C 8018                             0000000000000018   514          STFPC 6*4(R8)       Store resulting FPCR flags and DXC
                                                                           515 *
0000000000000614  B29D 0274                             0000000000000274   516          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000618  B347 5010                                                517          FIXBRA R1,5,R0,B'0000'  RZ, toward zero
000000000000061C  6010 7070                             0000000000000070   518          STD   R1,7*16(0,R7)     Store integer BFP result part 1
0000000000000620  6030 7078                             0000000000000078   519          STD   R3,(7*16)+8(0,R7) Store integer BFP result part 2
0000000000000624  B29C 801C                             000000000000001C   520          STFPC 7*4(R8)       Store resulting FPCR flags and DXC
                                                                           521 *
0000000000000628  B29D 0274                             0000000000000274   522          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
000000000000062C  B347 6010                                                523          FIXBRA R1,6,R0,B'0000'  RP, to +inf
0000000000000630  6010 7080                             0000000000000080   524          STD   R1,8*16(0,R7)     Store integer BFP result part 1
0000000000000634  6030 7088                             0000000000000088   525          STD   R3,(8*16)+8(0,R7) Store integer BFP result part 2
0000000000000638  B29C 8020                             0000000000000020   526          STFPC 8*4(R8)       Store resulting FPCR flags and DXC
                                                                           527 *
000000000000063C  B29D 0274                             0000000000000274   528          LFPC  FPCREGNT      Set exceptions non-trappable, clear flags
0000000000000640  B347 7010                                                529          FIXBRA R1,7,R0,B'0000'  RM, to -inf
0000000000000644  6010 7090                             0000000000000090   530          STD   R1,9*16(0,R7)     Store integer BFP result part 1
0000000000000648  6030 7098                             0000000000000098   531          STD   R3,(9*16)+8(0,R7) Store integer BFP result part 2
000000000000064C  B29C 8024                             0000000000000024   532          STFPC 9*4(R8)       Store resulting FPCR flags and DXC
                                                                           533 *
0000000000000650  4130 3010                             0000000000000010   534          LA    R3,16(0,R3)    Point to next input value
0000000000000654  4170 70A0                             00000000000000A0   535          LA    R7,10*16(0,R7) Point to next long BFP converted values
0000000000000658  4180 8030                             0000000000000030   536          LA    R8,12*4(0,R8)  Point to next FPCR/CC result area
000000000000065C  062C                                                     537          BCTR  R2,R12        Convert next input value.
000000000000065E  07FD                                                     538          BR    R13           All converted; return.
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    14

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

                                                                           540 ***********************************************************************
                                                                           541 *
                                                                           542 * Short integer inputs for Load FP Integer testing.  The same
                                                                           543 * values are used for short, long, and extended formats.
                                                                           544 *
                                                                           545 ***********************************************************************


0000000000000660                                                           547 SBFPIN   DS    0F                Inputs for short BFP testing
0000000000000660  3F800000                                                 548          DC    X'3F800000'         +1.0
0000000000000664  BFC00000                                                 549          DC    X'BFC00000'         -1.5
0000000000000668  7F810000                                                 550          DC    X'7F810000'         SNaN
000000000000066C  7FC10000                                                 551          DC    X'7FC10000'         QNaN
0000000000000670                                                           552          DS    0F           required by asma for following EQU to work.
                                      0000000000000010  0000000000000001   553 SBFPCT   EQU   *-SBFPIN     Count of short BFP in list * 4
                                                                           554 *
0000000000000670                                                           555 SBFPINRM DS    0F                Inputs for short BFP rounding testing
0000000000000670  C1180000                                                 556          DC    X'C1180000'         -9.5
0000000000000674  C0B00000                                                 557          DC    X'C0B00000'         -5.5
0000000000000678  C0200000                                                 558          DC    X'C0200000'         -2.5
000000000000067C  BFC00000                                                 559          DC    X'BFC00000'         -1.5
0000000000000680  BF000000                                                 560          DC    X'BF000000'         -0.5
0000000000000684  3F000000                                                 561          DC    X'3F000000'         +0.5
0000000000000688  3FC00000                                                 562          DC    X'3FC00000'         +1.5
000000000000068C  40200000                                                 563          DC    X'40200000'         +2.5
0000000000000690  40B00000                                                 564          DC    X'40B00000'         +5.5
0000000000000694  41180000                                                 565          DC    X'41180000'         +9.5
0000000000000698                                                           566          DS    0F           required by asma for following EQU to work.
                                      0000000000000028  0000000000000001   567 SBFPRMCT EQU   *-SBFPINRM   Count of short BFP rounding tests * 4
                                                                           568 *
0000000000000698                                                           569 LBFPIN   DS    0F                Inputs for long BFP testing
0000000000000698  3FF00000 00000000                                        570          DC    X'3FF0000000000000'         +1.0
00000000000006A0  BFF80000 00000000                                        571          DC    X'BFF8000000000000'         -1.5
00000000000006A8  7FF01000 00000000                                        572          DC    X'7FF0100000000000'         SNaN
00000000000006B0  7FF81000 00000000                                        573          DC    X'7FF8100000000000'         QNaN
00000000000006B8                                                           574          DS    0F           required by asma for following EQU to work.
                                      0000000000000020  0000000000000001   575 LBFPCT   EQU   *-LBFPIN     Count of long BFP in list * 8
                                                                           576 *
00000000000006B8                                                           577 LBFPINRM DS    0F
00000000000006B8  C0230000 00000000                                        578          DC    X'C023000000000000'         -9.5
00000000000006C0  C0160000 00000000                                        579          DC    X'C016000000000000'         -5.5
00000000000006C8  C0040000 00000000                                        580          DC    X'C004000000000000'         -2.5
00000000000006D0  BFF80000 00000000                                        581          DC    X'BFF8000000000000'         -1.5
00000000000006D8  BFE00000 00000000                                        582          DC    X'BFE0000000000000'         -0.5
00000000000006E0  3FE00000 00000000                                        583          DC    X'3FE0000000000000'         +0.5
00000000000006E8  3FF80000 00000000                                        584          DC    X'3FF8000000000000'         +1.5
00000000000006F0  40040000 00000000                                        585          DC    X'4004000000000000'         +2.5
00000000000006F8  40160000 00000000                                        586          DC    X'4016000000000000'         +5.5
0000000000000700  40230000 00000000                                        587          DC    X'4023000000000000'         +9.5
0000000000000708                                                           588          DS    0F           required by asma for following EQU to work.
                                      0000000000000050  0000000000000001   589 LBFPRMCT EQU   *-LBFPINRM   Count of long BFP rounding tests * 8
                                                                           590 *
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    15

      LOC            OBJECT CODE           ADDR1             ADDR2        STMT

0000000000000708                                                           591 XBFPIN   DS    0D                Inputs for long BFP testing
0000000000000708  3FFF0000 00000000                                        592          DC    X'3FFF0000000000000000000000000000'         +1.0
0000000000000718  BFFF8000 00000000                                        593          DC    X'BFFF8000000000000000000000000000'         -1.5
0000000000000728  7FFF0100 00000000                                        594          DC    X'7FFF0100000000000000000000000000'         SNaN
0000000000000738  7FFF8100 00000000                                        595          DC    X'7FFF8100000000000000000000000000'         QNaN
0000000000000748                                                           596          DS    0D           required by asma for following EQU to work.
                                      0000000000000040  0000000000000001   597 XBFPCT   EQU   *-XBFPIN     Count of extended BFP in list * 16
                                                                           598 *
0000000000000748                                                           599 XBFPINRM DS    0D
0000000000000748  C0023000 00000000                                        600          DC    X'C0023000000000000000000000000000'         -9.5
0000000000000758  C0016000 00000000                                        601          DC    X'C0016000000000000000000000000000'         -5.5
0000000000000768  C0004000 00000000                                        602          DC    X'C0004000000000000000000000000000'         -2.5
0000000000000778  BFFF8000 00000000                                        603          DC    X'BFFF8000000000000000000000000000'         -1.5
0000000000000788  BFFE0000 00000000                                        604          DC    X'BFFE0000000000000000000000000000'         -0.5
0000000000000798  3FFE0000 00000000                                        605          DC    X'3FFE0000000000000000000000000000'         +0.5
00000000000007A8  3FFF8000 00000000                                        606          DC    X'3FFF8000000000000000000000000000'         +1.5
00000000000007B8  40004000 00000000                                        607          DC    X'40004000000000000000000000000000'         +2.5
00000000000007C8  40016000 00000000                                        608          DC    X'40016000000000000000000000000000'         +5.5
00000000000007D8  40023000 00000000                                        609          DC    X'40023000000000000000000000000000'         +9.5
00000000000007E8                                                           610          DS    0D           required by asma for following EQU to work.
                                      00000000000000A0  0000000000000001   611 XBFPRMCT EQU   *-XBFPINRM   Count of extended BFP rounding tests * 16
                                                                           612 *
                                                                           613 *  Locations for results
                                                                           614 *
                                      0000000000001000  0000000000000000   615 SBFPOUT  EQU   BFPLDFPI+X'1000'    Integer short BFP rounded results
                                      0000000000001080  0000000000000000   616 SBFPFLGS EQU   BFPLDFPI+X'1080'    FPCR flags and DXC from short BFP
                                      0000000000001100  0000000000000000   617 SBFPRMO  EQU   BFPLDFPI+X'1100'    Short BFP rounding mode test results
                                      0000000000001300  0000000000000000   618 SBFPRMOF EQU   BFPLDFPI+X'1300'    Short BFP rounding mode FPCR results
                                                                           619 *
                                      0000000000001500  0000000000000000   620 LBFPOUT  EQU   BFPLDFPI+X'1500'    Integer long BFP rounded results
                                      0000000000001580  0000000000000000   621 LBFPFLGS EQU   BFPLDFPI+X'1580'    FPCR flags and DXC from long BFP
                                      0000000000001600  0000000000000000   622 LBFPRMO  EQU   BFPLDFPI+X'1600'    Long BFP rounding mode test results
                                      0000000000001A00  0000000000000000   623 LBFPRMOF EQU   BFPLDFPI+X'1A00'    Long BFP rounding mode FPCR results
                                                                           624 *
                                      0000000000001C00  0000000000000000   625 XBFPOUT  EQU   BFPLDFPI+X'1C00'    Integer extended BFP rounded results
                                      0000000000001C80  0000000000000000   626 XBFPFLGS EQU   BFPLDFPI+X'1C80'    FPCR flags and DXC from extended BFP
                                      0000000000001D00  0000000000000000   627 XBFPRMO  EQU   BFPLDFPI+X'1D00'    Extd BFP rounding mode test results
                                      0000000000002400  0000000000000000   628 XBFPRMOF EQU   BFPLDFPI+X'2400'    Extd BFP rounding mode FPCR results
                                                                           629 *
                                                                           630 *
00000000000007E8                                                           631          END
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    16

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

BFPLDFPI            J    000000    2024    56   74   76   77   79   81  129  615  616  617  618  620  621  622  623  625  626  627
                                               628
CTLR0               F    000270       4   119   94   95   96
EXTDS               F    0002A0       4   142  108
FIDBR               I    0003F8       4   295  104
FIDBRA              I    00043E       4   334  106
FIEBR               I    0002E0       4   175   99
FIEBRA              I    000326       4   214  101
FIXBR               I    000510       4   415  109
FIXBRA              I    000562       4   457  111
FPCREGNT            X    000274       4   120  182  224  230  236  242  250  255  260  265  270  275  302  344  350  356  362  370
                                               375  380  385  390  395  423  468  475  482  489  498  504  510  516  522  528
FPCREGTR            X    000278       4   121  187  307  429
HARDWAIT            X    000260       8   117   90
IMAGE               1    000000    2024     0
LBFPCT              U    000020       1   575  137
LBFPFLGS            U    001580       0   621  140
LBFPIN              F    000698       4   569  575  138
LBFPINRM            F    0006B8       4   577  589  156
LBFPOUT             U    001500       0   620  139
LBFPRMCT            U    000050       1   589  155
LBFPRMO             U    001600       0   622  157
LBFPRMOF            U    001A00       0   623  158
LONGS               F    000290       4   136  103
PCINTCD             H    00008E       2    75   87
PCNOTDTA            I    00020C       4    90   88
PCOLDPSW            U    000150       0    76   89
PROGCHK             H    000200       2    86   80
R0                  U    000000       1    57   94   96  181  183  189  220  226  232  238  244  251  256  261  266  271  276  301
                                               303  309  340  346  352  358  364  371  376  381  386  391  396  421  424  431  463
                                               470  477  484  491  499  505  511  517  523  529
R1                  U    000001       1    58  183  184  188  189  190  226  227  232  233  238  239  244  245  251  252  256  257
                                               261  262  266  267  271  272  276  277  303  304  308  309  310  346  347  352  353
                                               358  359  364  365  371  372  376  377  381  382  386  387  391  392  396  397  424
                                               425  430  431  432  470  471  477  478  484  485  491  492  499  500  505  506  511
                                               512  517  518  523  524  529  530
R10                 U    00000A       1    67   98  100  103  105  108  110  175  176  214  215  295  296  334  335  415  416  457
                                               458
R11                 U    00000B       1    68
R12                 U    00000C       1    69  179  196  218  283  299  316  338  403  419  439  461  537
R13                 U    00000D       1    70   99  101  104  106  109  111  178  197  217  284  298  317  337  404  418  440  460
                                               538
R14                 U    00000E       1    71
R15                 U    00000F       1    72
R2                  U    000002       1    59  175  177  196  214  216  283  295  297  316  334  336  403  415  417  422  439  457
                                               459  464  537
R3                  U    000003       1    60  175  181  193  214  220  280  295  301  313  334  340  400  415  421  422  426  433
                                               436  457  463  464  472  479  486  493  501  507  513  519  525  531  534
R4                  U    000004       1    61
R5                  U    000005       1    62
R6                  U    000006       1    63
R7                  U    000007       1    64  176  184  190  194  215  227  233  239  245  252  257  262  267  272  277  281  296
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    17

     SYMBOL        TYPE  VALUE   LENGTH  DEFN  REFERENCES

                                               304  310  314  335  347  353  359  365  372  377  382  387  392  397  401  416  425
                                               426  432  433  437  458  471  472  478  479  485  486  492  493  500  501  506  507
                                               512  513  518  519  524  525  530  531  535
R8                  U    000008       1    65  176  185  191  195  215  228  234  240  246  253  258  263  268  273  278  282  296
                                               305  311  315  335  348  354  360  366  373  378  383  388  393  398  402  416  427
                                               434  438  458  473  480  487  494  502  508  514  520  526  532  536
R9                  U    000009       1    66
RMEXTDS             F    0002D0       4   160  110
RMLONGS             F    0002C0       4   154  105
RMSHORTS            F    0002B0       4   148  100
SBFPCT              U    000010       1   553  131
SBFPFLGS            U    001080       0   616  134
SBFPIN              F    000660       4   547  553  132
SBFPINRM            F    000670       4   555  567  150
SBFPOUT             U    001000       0   615  133
SBFPRMCT            U    000028       1   567  149
SBFPRMO             U    001100       0   617  151
SBFPRMOF            U    001300       0   618  152
SHORTS              F    000280       4   130   98
START               I    000210       4    94   78
WAITPSW             X    000250       8   116  113
XBFPCT              U    000040       1   597  143
XBFPFLGS            U    001C80       0   626  146
XBFPIN              D    000708       8   591  597  144
XBFPINRM            D    000748       8   599  611  162
XBFPOUT             U    001C00       0   625  145
XBFPRMCT            U    0000A0       1   611  161
XBFPRMO             U    001D00       0   627  163
XBFPRMOF            U    002400       0   628  164
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    18

MACRO   DEFN  REFERENCES

No defined macros
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    19

   DESC     SYMBOL   SIZE    POS      ADDR

Entry: 0

Image      IMAGE     2024  000-7E7  000-7E7
  Region             2024  000-7E7  000-7E7
    CSECT  BFPLDFPI  2024  000-7E7  000-7E7
ASMA Ver. 0.2.0  ieee-loadfpi.asm: Test IEEE Load FP Integer                                        12 Jul 2016 21:56:21  Page    20

   STMT                             FILE NAME

1     C:\Users\srorso\Documents\GitHub\hyperion\tests\ieee-loadfpi.asm


** NO ERRORS FOUND **

